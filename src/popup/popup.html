<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>One-Click Outreach</title>
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>One-Click Outreach</h1>
            <button id="optionsBtn" class="options-btn" title="Settings">⚙️</button>
        </header>

        <!-- Status/Loading -->
        <div id="loadingSection" class="section loading-section">
            <div class="loading-spinner"></div>
            <p>Extracting page content...</p>
        </div>

        <!-- Error State -->
        <div id="errorSection" class="section error-section hidden">
            <div class="error-icon">⚠️</div>
            <p id="errorMessage">Unable to extract content from this page.</p>
            <button id="retryBtn" class="btn btn-secondary">Try Again</button>
        </div>

        <!-- Main Content -->
        <div id="mainSection" class="section main-section hidden">
            <!-- Extracted Content Preview -->
            <div class="content-preview">
                <h3>Extracted Content</h3>
                <div id="contentPreview" class="preview-text">
                    Content will appear here...
                </div>
                <div class="source-info">
                    <span id="sourceType" class="source-badge">LinkedIn</span>
                </div>
            </div>

            <!-- Message Intent -->
            <div class="intent-section">
                <label for="messageIntent" class="label">What kind of message do you want to send?</label>
                <textarea 
                    id="messageIntent" 
                    class="intent-input" 
                    placeholder="e.g., Introductory note, ask for 15-minute call"
                    rows="2"
                    maxlength="200"
                ></textarea>
                <div class="char-count">
                    <span id="charCount">0</span>/200
                </div>
            </div>

            <!-- Style Rules -->
            <div class="rules-section">
                <h4>Style Rules</h4>
                <div class="rules-grid">
                    <label class="checkbox-label">
                        <input type="checkbox" id="maxSentences" checked>
                        <span class="checkmark"></span>
                        Max 6 sentences
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="maxParagraphs" checked>
                        <span class="checkmark"></span>
                        1-2 paragraphs
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="noEmDashes" checked>
                        <span class="checkmark"></span>
                        No em dashes
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="includeCalendar">
                        <span class="checkmark"></span>
                        Include calendar link
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="includeBio">
                        <span class="checkmark"></span>
                        Include bio
                    </label>
                </div>
            </div>

            <!-- Generate Button -->
            <button id="generateBtn" class="btn btn-primary">
                <span class="btn-text">Generate Email</span>
                <div class="btn-spinner hidden"></div>
            </button>
        </div>

        <!-- Results Section -->
        <div id="resultsSection" class="section results-section hidden">
            <div class="results-header">
                <h3>Generated Email</h3>
                <button id="backBtn" class="btn btn-secondary btn-small">← Back</button>
            </div>

            <!-- Subject Line -->
            <div class="result-group">
                <label class="result-label">Subject Line</label>
                <div id="subjectLine" class="result-content"></div>
            </div>

            <!-- Email Body -->
            <div class="result-group">
                <label class="result-label">Email Body</label>
                <div id="emailBody" class="result-content"></div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button id="copyBtn" class="btn btn-primary">
                    <span class="btn-text">Copy to Clipboard</span>
                    <span class="btn-success hidden">✓ Copied!</span>
                </button>
                <button id="regenerateBtn" class="btn btn-secondary">Generate New</button>
            </div>

            <!-- Stats -->
            <div class="stats">
                <span class="stat">
                    <span id="sentenceCount">0</span> sentences
                </span>
                <span class="stat">
                    <span id="paragraphCount">0</span> paragraphs
                </span>
                <span class="stat">
                    <span id="wordCount">0</span> words
                </span>
            </div>
        </div>

        <!-- Configuration Warning -->
        <div id="configSection" class="section config-section hidden">
            <div class="config-icon">⚙️</div>
            <h3>Setup Required</h3>
            <p>Please configure your API key and settings before generating emails.</p>
            <button id="openOptionsBtn" class="btn btn-primary">Open Settings</button>
        </div>
    </div>

    <script src="popup.js"></script>
</body>
</html>